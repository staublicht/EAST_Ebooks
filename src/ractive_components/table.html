<style type="text/css">
	tbody tr:hover {
		background-color: #ffcfa5;
	}
	tbody tr a {

	}
</style>


<table class="table">
	<thead>
		<tr>
		{{#columns : key}}
			<th>{{.}}</th>
		{{/columns}}
		</tr>
	</thead>
	<tbody>
		{{#entries : i}}
		<tr on-click="entryClicked">
			{{#columns : key}}
			{{ #if key != 'status' }}
				<td >{{{ entries[i][key] }}}</td>
			{{else}}
				<td >{{{ status_tags[status] }}}</td>
			{{/if}}
			{{/columns}}
		</tr>
		{{/entries}}
	</tbody>
</table>

<script>
	component.exports = {
		onrender: function () {
			console.log( 'Table list rendered!');
			this.on( 'entryClicked', function (event) {
				console.log( 'entryClicked', event );
				this.fire( 'selectEntry', { "id" : event.context["id"] } );
			});
		},
		isolated: true
		/* Test Data
		,data: function() {
			return {
				// TODO change columsn from keys to indizes
				'columns' : { 'id' : "Id",
											'author' : "Author",
											 'original_title' : "Original Title",
											 'language' : "Language",
											 'status' : "Status",
											 'release_date' : "Release Date",
											 'downloads' : "Downloads"
										},
				'entries' : [
					{ 'id' : 101 ,
					 'author' : 'Patrisiýa Jon',
					 'original_title' : 'Star of Light',
					 'language' : 'Turkmen',
					 'status' : 0,
					 'release_date' : '-',
					 'downloads' : '-'
					},
					{ 'id' : 102 ,
					 'author' : 'Patrisiýa Jon',
					 'original_title' : 'Star of Light',
					 'language' : 'Turkmen',
					 'status' : 2,
					 'release_date' : '-',
					 'downloads' : '-'
					},
					{ 'id' : 103 ,
					 'author' : 'Patrisiýa Jon',
					 'original_title' : 'Star of Light',
					 'language' : 'Turkmen',
					 'status' : 3,
					 'release_date' : '-',
					 'downloads' : '-'
					}
				]
			};
		}
		/* */
	};
</script>
